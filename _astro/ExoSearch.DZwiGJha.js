import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.CQ95-tCy.js";import{g as M,a as q,d as I,L as A,D}from"./translations.CDCZRzi2.js";import{p as F}from"./csv.DMq-eBQM.js";/* empty css                       */import{m as H}from"./proxy.CMJzDI2N.js";const f=n=>{const d=Number(n);return Number.isFinite(d)?d:null},R=(n,d)=>({id:n.pl_name||`${n.pl_name}|${n.hostname}|${d}`,name:n.pl_name,host:n.hostname,method:n.discoverymethod||"",year:f(n.disc_year),mass:f(n.pl_bmasse),distance:f(n.sy_dist)});function z({src:n="/exoplanets.csv",lang:d=D,messages:N}){const[h,S]=l.useState([]),[j,C]=l.useState(""),p=M(d),[m,w]=l.useState(p),a=l.useMemo(()=>N&&m===p?N:q(m).search,[m,N,p]),{filters:c,tableHeaders:t}=a,[x,v]=l.useState(c.methodAll),[u,E]=l.useState(""),[g,_]=l.useState("");l.useEffect(()=>{const s=new AbortController;return(async()=>{const r=await(await fetch(n,{signal:s.signal})).text(),o=F(r);S(Array.isArray(o)?o.map(R):[])})().catch(()=>{}),()=>s.abort()},[n]),l.useEffect(()=>{const s=I(p);w(r=>r===s?r:s);const i=r=>{const o=M(r.detail?.lang);w(o)};return window.addEventListener(A,i),()=>window.removeEventListener(A,i)},[p]),l.useEffect(()=>{v(c.methodAll)},[c.methodAll]);const V=l.useMemo(()=>{const s=Array.from(new Set(h.map(i=>i.method).filter(Boolean))).sort();return[c.methodAll,...s]},[h,c.methodAll]),b=l.useMemo(()=>{const s=j.trim().toLowerCase(),i=u?Number(u):-1/0,r=g?Number(g):1/0;return h.filter(o=>{const T=!s||o.name.toLowerCase().includes(s)||(o.host||"").toLowerCase().includes(s),k=x===c.methodAll||o.method===x,y=o.year??NaN,$=Number.isNaN(y)?!0:y>=i&&y<=r;return T&&k&&$}).slice(0,20)},[h,j,x,u,g,c.methodAll]),L=(s,i={})=>s==null?"—":Number(s).toLocaleString(m,{maximumFractionDigits:2,...i});return e.jsxs(H.section,{className:"glass card",style:{marginTop:"1rem"},initial:{opacity:0,y:28},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.7,ease:[.16,1,.3,1]},children:[e.jsx("h3",{style:{marginTop:0},children:a.title}),e.jsxs("div",{className:"search-controls",children:[e.jsx("input",{className:"glass",placeholder:c.queryPlaceholder,value:j,onChange:s=>C(s.target.value),style:{padding:".6rem .8rem"}}),e.jsx("select",{className:"glass",value:x,onChange:s=>v(s.target.value),style:{padding:".6rem .8rem"},children:V.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("input",{className:"glass",type:"number",placeholder:c.yearMin,value:u,onChange:s=>E(s.target.value),style:{padding:".6rem .8rem"}}),e.jsx("input",{className:"glass",type:"number",placeholder:c.yearMax,value:g,onChange:s=>_(s.target.value),style:{padding:".6rem .8rem"}})]}),e.jsxs("div",{className:"exo-info",children:[e.jsx("span",{className:"exo-chip",title:a.legend.planetHint,children:a.legend.planet}),e.jsx("span",{className:"exo-chip",title:a.legend.hostHint,children:a.legend.host}),e.jsx("span",{className:"exo-chip",title:a.legend.methodHint,children:a.legend.method}),e.jsx("span",{className:"exo-chip",title:a.legend.yearHint,children:a.legend.year}),e.jsx("span",{className:"exo-chip",title:a.legend.massHint,children:a.legend.mass}),e.jsx("span",{className:"exo-chip",title:a.legend.distanceHint,children:a.legend.distance})]}),e.jsxs("div",{className:"exo-table-wrap",children:[e.jsx("div",{className:"exo-table-glow","aria-hidden":!0}),e.jsxs("table",{className:"exo-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"left",title:t.planetHint,children:t.planet}),e.jsx("th",{className:"left",title:t.hostHint,children:t.host}),e.jsx("th",{title:t.methodHint,children:t.method}),e.jsx("th",{title:t.yearHint,children:t.year}),e.jsx("th",{title:t.massHint,children:t.mass}),e.jsx("th",{title:t.distanceHint,children:t.distance})]})}),e.jsx("tbody",{children:b.map((s,i)=>e.jsxs(H.tr,{className:"exo-row",initial:{opacity:0,y:18},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-25% 0px"},transition:{duration:.45,delay:i*.035,ease:[.16,1,.3,1]},children:[e.jsxs("td",{className:"pad left",children:[e.jsx("span",{className:"cell-heading",children:t.planet}),e.jsx("span",{className:"cell-value",children:s.name})]}),e.jsxs("td",{className:"pad left",children:[e.jsx("span",{className:"cell-heading",children:t.host}),e.jsx("span",{className:"cell-value",children:s.host})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:t.method}),e.jsx("span",{className:"cell-value",children:s.method||a.emptyValue})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:t.year}),e.jsx("span",{className:"cell-value",children:s.year??a.emptyValue})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:t.mass}),e.jsx("span",{className:"cell-value",children:s.mass==null?a.emptyValue:`${L(s.mass)} M⊕`})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:t.distance}),e.jsx("span",{className:"cell-value",children:s.distance==null?a.emptyValue:`${L(s.distance)} pc`})]})]},s.id))})]}),e.jsxs("footer",{className:"exo-table-footer",children:[e.jsxs("div",{className:"exo-table-footer__meta",children:[e.jsxs("span",{className:"exo-stats-chip",children:[e.jsx("span",{className:"dot","aria-hidden":!0}),a.summary.replace("{shown}",b.length.toLocaleString(m)).replace("{total}",h.length.toLocaleString(m))]}),e.jsx("span",{className:"exo-stats-chip ghost",children:a.footerHint})]}),e.jsx("button",{type:"button",className:"exo-scroll-top",onClick:()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},children:a.backTop})]})]})]})}export{z as default};
