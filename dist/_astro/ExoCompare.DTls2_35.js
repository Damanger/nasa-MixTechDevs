const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/ThreeCompare.qexa9ukJ.js","_astro/jsx-runtime.D_zvdyIk.js","_astro/index.CQ95-tCy.js","_astro/client.D1xQOTRZ.js"])))=>i.map(i=>d[i]);
import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.CQ95-tCy.js";import{g as T,a as k,d as F,L as A,D as I}from"./translations.p4xl-p1H.js";import{f as U}from"./fetchCSV.DjmYkm7D.js";import{m as L}from"./proxy.CMJzDI2N.js";import"./csv.DMq-eBQM.js";const J="modulepreload",z=function(a){return"/"+a},M={},B=function(m,o,y){let w=Promise.resolve();if(o&&o.length>0){let x=function(c){return Promise.all(c.map(g=>Promise.resolve(g).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),E=u?.nonce||u?.getAttribute("nonce");w=x(o.map(c=>{if(c=z(c),c in M)return;M[c]=!0;const g=c.endsWith(".css"),d=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const n=document.createElement("link");if(n.rel=g?"stylesheet":J,g||(n.as="script"),n.crossOrigin="",n.href=c,E&&n.setAttribute("nonce",E),document.head.appendChild(n),g)return new Promise((N,s)=>{n.addEventListener("load",N),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${c}`)))})}))}function b(x){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=x,window.dispatchEvent(u),!u.defaultPrevented)throw x}return w.then(x=>{for(const u of x||[])u.status==="rejected"&&b(u.reason);return m().catch(b)})},G=l.lazy(()=>B(()=>import("./ThreeCompare.qexa9ukJ.js"),__vite__mapDeps([0,1,2,3]))),v=(a,m=!1)=>{const o=Number(a);return!Number.isFinite(o)||m&&o===0?null:o},O=(a,m)=>({id:a.pl_name||`${a.pl_name}|${a.hostname}|${m}`,name:a.pl_name,host:a.hostname,method:a.discoverymethod||"",year:v(a.disc_year),massE:v(a.pl_bmasse),radiusE:v(a.pl_rade),tempEq:v(a.pl_eqt),flux:v(a.pl_insol),distance:v(a.sy_dist,!0),specType:a.st_spectype||""}),R=(a,m,o)=>Math.min(Math.max(a,m),o);function H(a,m){if(m&&m>0)return R(m,.4,15);if(!a||a<=0)return 1;const o=Math.cbrt(a);return R(o,.4,15)}function ee({src:a="/exoplanets.csv",lang:m=I,messages:o}){const[y,w]=l.useState([]),[b,x]=l.useState("Proxima Cen d"),[u,E]=l.useState(!0),[c,g]=l.useState("earth-exo"),d=T(m),[n,N]=l.useState(d),s=l.useMemo(()=>o&&n===d?o:k(n).compare,[o,n,d]),j=s.nullLabel??"Null",P=l.useMemo(()=>{const e={es:"Modo de comparación",en:"Comparison mode",de:"Vergleichsmodus"};return e[n]||e.en},[n]);l.useEffect(()=>{const e=F(d);N(h=>h===e?h:e);const r=h=>{const p=T(h.detail?.lang);N(p)};return window.addEventListener(A,r),()=>window.removeEventListener(A,r)},[d]),l.useEffect(()=>{const e=new AbortController;return(async()=>{try{const r=await U(a,{signal:e.signal});w(Array.isArray(r)?r.map(O):[])}catch{}})(),()=>e.abort()},[a]);const D=l.useMemo(()=>y.map(e=>e.name).filter(Boolean).sort(),[y]),i=l.useMemo(()=>y.length?y.find(r=>(r.name||"").toLowerCase()===(b||"").toLowerCase())||y[0]:null,[y,b]),S=l.useMemo(()=>i?H(i.massE,i.radiusE):1,[i]),V=11.21,$=l.useMemo(()=>{if(!i)return null;const{facts:e,suffixes:r}=s,h=(f,C={})=>f==null?j:f.toLocaleString(n,C),p=(f,C="",q={})=>f==null?j:`${f.toLocaleString(n,q)}${C}`,_=f=>f||j;return[{label:e.mass,value:p(i.massE,r.mass,{maximumFractionDigits:2})},{label:e.radius,value:p(S,r.radius,{maximumFractionDigits:2})},{label:e.tempEq,value:p(i.tempEq,r.temp,{maximumFractionDigits:0})},{label:e.method,value:_(i.method)},{label:e.year,value:h(i.year)},{label:e.host,value:_(i.host)},{label:e.spectralType,value:_(i.specType)},{label:e.distance,value:p(i.distance,r.distance,{maximumFractionDigits:2})}]},[i,S,s,n,j]);return t.jsxs(L.section,{style:{marginTop:"1.25rem"},initial:{opacity:0,y:32},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.75,ease:[.16,1,.3,1]},children:[t.jsx("h2",{className:"compare-title",style:{textAlign:"center",margin:"0 0 .4rem"},children:s.heading}),t.jsxs("p",{className:"subtitle compare-subtitle",style:{textAlign:"center",margin:"0 0 1rem"},children:[s.description.intro," ",t.jsxs("span",{"aria-label":s.formula.base,style:{whiteSpace:"nowrap"},children:[s.formula.base,t.jsx("sup",{children:s.formula.exponent})]}),s.description.outro]}),t.jsxs(L.div,{className:"glass compare-grid",initial:{opacity:0,y:28},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.7,delay:.05,ease:[.16,1,.3,1]},children:[t.jsx(L.div,{className:"glass compare-canvas",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.7,delay:.1,ease:[.16,1,.3,1]},children:(()=>{const e=[],r={label:s.earthLabel,radius:1,color:"#4b84ff"},h={label:s.jupiterLabel||"Jupiter",radius:V,color:"#d0a772"},p={label:i?.name||"Exoplanet",radius:S,color:"#6b3a2a"};return c==="earth-exo"?e.push(r,p):c==="jupiter-exo"?e.push(p,h):e.push(r,p,h),t.jsx(l.Suspense,{fallback:t.jsx("div",{style:{textAlign:"center"},children:s.loading3D||"Cargando visualización 3D…"}),children:t.jsx(G,{bodies:e,autoRotate:u})})})()}),t.jsxs(L.div,{className:"glass compare-details",initial:{opacity:0,x:24},whileInView:{opacity:1,x:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.7,delay:.15,ease:[.16,1,.3,1]},children:[t.jsxs("div",{className:"search-controls compare-controls",children:[t.jsx("input",{className:"glass",list:"exo-list",placeholder:s.inputPlaceholder,"aria-label":s.inputPlaceholder,value:b,onChange:e=>x(e.target.value),style:{flex:1,padding:".6rem .8rem"}}),t.jsx("datalist",{id:"exo-list",children:D.map(e=>t.jsx("option",{value:e},e))}),t.jsxs("select",{className:"glass",value:c,onChange:e=>g(e.target.value),"aria-label":P,children:[t.jsx("option",{value:"earth-exo",children:s.modes?.earthExo||"Earth + Selected"}),t.jsx("option",{value:"jupiter-exo",children:s.modes?.jupiterExo||"Jupiter + Selected"}),t.jsx("option",{value:"all",children:s.modes?.all||"All three"})]}),t.jsx("button",{className:"btn secondary compare-toggle",onClick:()=>E(e=>!e),"aria-pressed":u,children:u?s.toggle.stop:s.toggle.rotate})]}),t.jsxs("div",{className:"glass card",style:{padding:".9rem"},children:[t.jsx("h3",{style:{marginTop:0},children:i?.name||j}),t.jsx("ul",{className:"compare-facts",style:{listStyle:"none",padding:0,margin:0,display:"grid",gridTemplateColumns:"1fr 1fr",gap:".35rem .75rem"},children:$?.map(({label:e,value:r})=>t.jsxs("li",{children:[t.jsxs("strong",{children:[e,":"]})," ",t.jsx("span",{children:r})]},e))}),t.jsx("p",{className:"subtitle",style:{marginTop:".75rem"},children:s.disclaimer})]}),t.jsxs("div",{className:"glass card",style:{padding:"0.9rem",marginTop:"0.75rem"},children:[t.jsx("h3",{style:{marginTop:0},children:s.context.title}),t.jsx("p",{style:{margin:0},children:s.context.body})]})]})]})]})}export{ee as default};
