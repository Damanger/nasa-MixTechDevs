import{g as M,a as F,d as G,L as S,j as t,D as H}from"./translations.B_Ehg3mh.js";import{r as o}from"./index.CQ95-tCy.js";const j=(n,h=!1)=>{const l=Number(n);return!Number.isFinite(l)||h&&l===0?null:l},_=n=>({id:n["No."],name:n["Planet Name"],host:n["Planet Host"],method:n["Discovery Method"]||null,year:j(n["Discovery Year"]),mass:j(n.Mass),distance:j(n.Distance,!0)});function z({src:n="/exoplanets.json",lang:h=H,messages:l}){const[c,b]=o.useState(null),[y,Y]=o.useState(null),m=M(h),[d,L]=o.useState(m),u=o.useMemo(()=>l&&d===m?l:F(d).summary,[d,l,m]),{cards:i,nullLabel:g="Null"}=u;o.useEffect(()=>{const e=G(m);L(r=>r===e?r:e);const s=r=>{const x=M(r.detail?.lang);L(x)};return window.addEventListener(S,s),()=>window.removeEventListener(S,s)},[m]),o.useEffect(()=>{const e=new AbortController;return(async()=>{try{const s=await fetch(n,{signal:e.signal});if(!s.ok)throw new Error(`HTTP ${s.status}`);const r=await s.json();b(Array.isArray(r)?r.map(_):[])}catch(s){s.name!=="AbortError"&&Y(s)}})(),()=>e.abort()},[n]);const N=o.useMemo(()=>{if(!c)return null;const e=c.length,s=c.map(a=>a.year).filter(Boolean),r=s.length?Math.min(...s):null,x=s.length?Math.max(...s):null,f=new Map;for(const a of c)a.method&&f.set(a.method,(f.get(a.method)??0)+1);const C=[...f.entries()].sort((a,p)=>p[1]-a[1]).slice(0,3),P=c.filter(a=>a.distance!=null).sort((a,p)=>a.distance-p.distance).slice(0,5);return{total:e,minYear:r,maxYear:x,topMethods:C,nearest:P}},[c]);if(y)return t.jsxs("div",{className:"glass card",style:{padding:"1rem"},children:[u.errorPrefix,": ",String(y)]});if(!N)return t.jsx("div",{className:"glass card",style:{padding:"1rem"},children:u.loading});const{total:A,minYear:T,maxYear:D,topMethods:R,nearest:v}=N,w=e=>e==null?g:e.toLocaleString(d),E=e=>e==null?g:e.toLocaleString(d);return t.jsxs("section",{className:"grid","aria-label":u.ariaLabel,children:[t.jsxs("article",{className:"glass card",children:[t.jsx("h3",{children:i.total.title}),t.jsx("p",{style:{fontSize:"2rem",margin:0},children:w(A)}),t.jsx("p",{children:i.total.description})]}),t.jsxs("article",{className:"glass card",children:[t.jsx("h3",{children:i.timeRange.title}),t.jsxs("p",{style:{margin:0},children:[E(T),"–",E(D)]}),t.jsx("p",{children:i.timeRange.description})]}),t.jsxs("article",{className:"glass card",children:[t.jsx("h3",{children:i.topMethods.title}),t.jsx("ul",{style:{margin:0,paddingLeft:"1rem"},children:R.map(([e,s])=>t.jsxs("li",{children:[e," — ",s.toLocaleString(d)]},e))})]}),t.jsxs("article",{className:"glass card",children:[t.jsx("h3",{children:i.nearest.title}),t.jsx("ol",{style:{margin:0,paddingLeft:"1rem"},children:v.map(e=>t.jsxs("li",{children:[e.name," ",t.jsxs("span",{style:{opacity:.75},children:["(",e.distance!=null?`${w(e.distance)} pc`:g,")"]})]},e.id))}),t.jsx("p",{style:{opacity:.75,marginTop:".5rem"},children:i.nearest.note})]})]})}export{z as default};
