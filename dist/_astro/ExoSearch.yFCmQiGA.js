import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.CQ95-tCy.js";import{g as I,a as K,d as U,L as T,D as W}from"./translations.p4xl-p1H.js";import{f as Z}from"./fetchCSV.DjmYkm7D.js";/* empty css                       */import{m as q}from"./proxy.CMJzDI2N.js";import"./csv.DMq-eBQM.js";const E=i=>{const x=Number(i);return Number.isFinite(x)?x:null},J=(i,x)=>({id:i.pl_name||`${i.pl_name}|${i.hostname}|${x}`,name:i.pl_name,host:i.hostname,method:i.discoverymethod||"",year:E(i.disc_year),mass:E(i.pl_bmasse),distance:E(i.sy_dist)});function le({src:i="/exoplanets.csv",lang:x=W,messages:L}){const[h,D]=l.useState([]),[S,$]=l.useState(""),N=I(x),[r,H]=l.useState(N),s=l.useMemo(()=>L&&r===N?L:K(r).search,[r,L,N]),{filters:c,tableHeaders:n}=s,[j,P]=l.useState(c.methodAll),[b,z]=l.useState(""),[f,R]=l.useState("");l.useEffect(()=>{const a=new AbortController;return(async()=>{try{const t=await Z(i,{signal:a.signal});D(Array.isArray(t)?t.map(J):[])}catch{}})(),()=>a.abort()},[i]),l.useEffect(()=>{const a=U(N);H(m=>m===a?m:a);const t=m=>{const o=I(m.detail?.lang);H(o)};return window.addEventListener(T,t),()=>window.removeEventListener(T,t)},[N]),l.useEffect(()=>{P(c.methodAll)},[c.methodAll]);const Y=l.useMemo(()=>{const a=Array.from(new Set(h.map(t=>t.method).filter(Boolean))).sort();return[c.methodAll,...a]},[h,c.methodAll]),A=l.useMemo(()=>{const a=S.trim().toLowerCase(),t=b?Number(b):-1/0,m=f?Number(f):1/0;return h.filter(o=>{const d=!a||o.name.toLowerCase().includes(a)||(o.host||"").toLowerCase().includes(a),y=j===c.methodAll||o.method===j,M=o.year??NaN,Q=Number.isNaN(M)?!0:M>=t&&M<=m;return d&&y&&Q})},[h,S,j,b,f,c.methodAll]),C=20,[G,g]=l.useState(1),u=Math.max(1,Math.ceil(A.length/C)),p=Math.min(G,u),_=(p-1)*C,k=A.slice(_,_+C);l.useEffect(()=>{g(1)},[S,j,b,f,h]);const F=(a,t={})=>a==null?"—":Number(a).toLocaleString(r,{maximumFractionDigits:2,...t}),V=l.useMemo(()=>{const a={es:{search:"Buscar por planeta u host",method:"Filtrar por método"},en:{search:"Search by planet or host",method:"Filter by method"},de:{search:"Nach Planet oder Stern suchen",method:"Nach Methode filtern"}};return a[r]||a.en},[r]),v=l.useMemo(()=>{const a={es:{nav:"Paginación",first:"Primera página",prev:"Página anterior",next:"Página siguiente",last:"Última página"},en:{nav:"Pagination",first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},de:{nav:"Seitennavigation",first:"Erste Seite",prev:"Vorherige Seite",next:"Nächste Seite",last:"Letzte Seite"}};return a[r]||a.en},[r]),w=l.useMemo(()=>{const a=new Date().getFullYear(),t=h.map(y=>y.year).filter(y=>Number.isFinite(y)),m=t.length?Math.min(...t):1992,o=Math.min(1992,m),d=Array.from({length:a-o+1},(y,M)=>String(o+M));return{start:o,now:a,list:d}},[h]),B=l.useMemo(()=>{const a={es:"Sin resultados. Ajusta los filtros o la búsqueda.",en:"No results. Adjust filters or search.",de:"Keine Ergebnisse. Filter oder Suche anpassen."};return a[r]||a.en},[r]);return e.jsxs(q.section,{className:"glass card",style:{marginTop:"1rem"},initial:{opacity:0,y:28},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.7,ease:[.16,1,.3,1]},children:[e.jsx("h3",{style:{marginTop:0},children:s.title}),e.jsxs("div",{className:"search-controls",children:[e.jsx("input",{className:"glass",placeholder:c.queryPlaceholder,"aria-label":V.search,value:S,onChange:a=>$(a.target.value),style:{padding:".6rem .8rem"}}),e.jsx("select",{className:"glass",value:j,onChange:a=>P(a.target.value),style:{padding:".6rem .8rem"},"aria-label":V.method,children:Y.map(a=>e.jsx("option",{value:a,children:a},a))}),e.jsx("input",{className:"glass",type:"number",placeholder:c.yearMin,"aria-label":c.yearMin,value:b,onChange:a=>z(a.target.value),style:{padding:".6rem .8rem"},min:w.start,max:w.now,step:1,list:"exo-years"}),e.jsx("input",{className:"glass",type:"number",placeholder:c.yearMax,"aria-label":c.yearMax,value:f,onChange:a=>R(a.target.value),style:{padding:".6rem .8rem"},min:w.start,max:w.now,step:1,list:"exo-years"})]}),e.jsx("datalist",{id:"exo-years",children:w.list.map(a=>e.jsx("option",{value:a},a))}),e.jsxs("div",{className:"exo-info",children:[e.jsx("span",{className:"exo-chip",title:s.legend.planetHint,children:s.legend.planet}),e.jsx("span",{className:"exo-chip",title:s.legend.hostHint,children:s.legend.host}),e.jsx("span",{className:"exo-chip",title:s.legend.methodHint,children:s.legend.method}),e.jsx("span",{className:"exo-chip",title:s.legend.yearHint,children:s.legend.year}),e.jsx("span",{className:"exo-chip",title:s.legend.massHint,children:s.legend.mass}),e.jsx("span",{className:"exo-chip",title:s.legend.distanceHint,children:s.legend.distance})]}),e.jsxs("div",{className:"exo-table-wrap",children:[e.jsx("div",{className:"exo-table-glow","aria-hidden":!0}),A.length>0?e.jsxs("table",{className:"exo-table",children:[e.jsx("caption",{className:"sr-only",children:s.title}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"left",title:n.planetHint,children:n.planet}),e.jsx("th",{scope:"col",className:"left",title:n.hostHint,children:n.host}),e.jsx("th",{scope:"col",title:n.methodHint,children:n.method}),e.jsx("th",{scope:"col",title:n.yearHint,children:n.year}),e.jsx("th",{scope:"col",title:n.massHint,children:n.mass}),e.jsx("th",{scope:"col",title:n.distanceHint,children:n.distance})]})}),e.jsx("tbody",{children:k.map((a,t)=>e.jsxs(q.tr,{className:"exo-row",initial:{opacity:0,y:18},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-25% 0px"},transition:{duration:.45,delay:t*.035,ease:[.16,1,.3,1]},children:[e.jsxs("td",{className:"pad left",children:[e.jsx("span",{className:"cell-heading",children:n.planet}),e.jsx("span",{className:"cell-value",children:a.name})]}),e.jsxs("td",{className:"pad left",children:[e.jsx("span",{className:"cell-heading",children:n.host}),e.jsx("span",{className:"cell-value",children:a.host})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:n.method}),e.jsx("span",{className:"cell-value",children:a.method||s.emptyValue})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:n.year}),e.jsx("span",{className:"cell-value",children:a.year??s.emptyValue})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:n.mass}),e.jsx("span",{className:"cell-value",children:a.mass==null?s.emptyValue:`${F(a.mass)} M⊕`})]}),e.jsxs("td",{className:"num",children:[e.jsx("span",{className:"cell-heading",children:n.distance}),e.jsx("span",{className:"cell-value",children:a.distance==null?s.emptyValue:`${F(a.distance)} pc`})]})]},a.id))})]}):e.jsx("div",{className:"glass card",role:"status","aria-live":"polite",style:{padding:".9rem",marginTop:".5rem"},children:B}),e.jsxs("footer",{className:"exo-table-footer",children:[e.jsxs("div",{className:"exo-table-footer__meta",children:[e.jsxs("span",{className:"exo-stats-chip",children:[e.jsx("span",{className:"dot","aria-hidden":!0}),s.summary.replace("{shown}",k.length.toLocaleString(r)).replace("{total}",h.length.toLocaleString(r))]}),e.jsx("span",{className:"exo-stats-chip ghost",children:s.footerHint})]}),u>1&&e.jsxs("nav",{className:"exo-pagination","aria-label":v.nav,style:{display:"flex",gap:".4rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn secondary",onClick:()=>g(1),disabled:p===1,"aria-label":v.first,children:"«"}),e.jsx("button",{className:"btn secondary",onClick:()=>g(a=>Math.max(1,a-1)),disabled:p===1,"aria-label":v.prev,children:"‹"}),(()=>{const t=Math.max(1,p-Math.floor(2.5)),m=Math.min(u,t+5-1),o=[];for(let d=t;d<=m;d++)o.push(e.jsx("button",{className:"btn secondary","aria-current":d===p?"page":void 0,onClick:()=>g(d),style:d===p?{borderColor:"rgba(137,180,255,.5)"}:void 0,children:d},d));return o})(),e.jsx("button",{className:"btn secondary",onClick:()=>g(a=>Math.min(u,a+1)),disabled:p===u,"aria-label":v.next,children:"›"}),e.jsx("button",{className:"btn secondary",onClick:()=>g(u),disabled:p===u,"aria-label":v.last,children:"»"})]}),e.jsx("button",{type:"button",className:"exo-scroll-top",onClick:()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},children:s.backTop})]})]})]})}export{le as default};
