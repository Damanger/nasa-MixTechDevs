import{j as f}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.CQ95-tCy.js";import{g as O,a as K,d as Q,L as R,D as W}from"./translations.CDCZRzi2.js";import{p as X}from"./csv.DMq-eBQM.js";import{i as Y,f as G,a as J,J as Z,u as B,M as $,b as tt,c as et,d as nt,e as M,r as rt,m as N}from"./proxy.CMJzDI2N.js";function st(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],r=t[1+n],g=t[2+n],m=t[3+n],p=Y(r,g,m);return e?p(s):p}function it(t,e,n){const s=t.get();let r=null,g=s,m;const p=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,x=()=>{r&&(r.stop(),r=null)},b=()=>{x(),r=new Z({keyframes:[P(t.get()),P(g)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:m})};if(t.attach((l,d)=>(g=l,m=y=>d(U(y,p)),G.postRender(b),t.get()),x),J(e)){const l=e.on("change",y=>t.set(U(y,p))),d=t.on("destroy",l);return()=>{l(),d()}}return x}function U(t,e){return e?t+e:t}function P(t){return typeof t=="number"?t:parseFloat(t)}function F(t){const e=B(()=>tt(t)),{isStatic:n}=u.useContext($);if(n){const[,s]=u.useState(t);u.useEffect(()=>e.on("change",s),[])}return e}function q(t,e){const n=F(e()),s=()=>n.set(e());return s(),et(()=>{const r=()=>G.preRender(s,!1,!0),g=t.map(m=>m.on("change",r));return()=>{g.forEach(m=>m()),nt(s)}}),n}function ot(t){M.current=[],t();const e=q(M.current,t);return M.current=void 0,e}function at(t,e,n,s){if(typeof t=="function")return ot(t);const r=st(e,n,s);return Array.isArray(t)?_(t,r):_([t],([g])=>r(g))}function _(t,e){const n=B(()=>[]);return q(t,()=>{n.length=0;const s=t.length;for(let r=0;r<s;r++)n[r]=t[r].get();return e(n)})}function ct(t,e={}){const{isStatic:n}=u.useContext($),s=()=>J(t)?t.get():t;if(n)return at(s);const r=F(s());return u.useInsertionEffect(()=>it(r,t,e),[r,JSON.stringify(e)]),r}const lt={some:0,all:1};function ut(t,e,{root:n,margin:s,amount:r="some"}={}){const g=rt(t),m=new WeakMap,p=b=>{b.forEach(l=>{const d=m.get(l.target);if(l.isIntersecting!==!!d)if(l.isIntersecting){const y=e(l.target,l);typeof y=="function"?m.set(l.target,y):x.unobserve(l.target)}else typeof d=="function"&&(d(l),m.delete(l.target))})},x=new IntersectionObserver(p,{root:n,rootMargin:s,threshold:typeof r=="number"?r:lt[r]});return g.forEach(b=>x.observe(b)),()=>x.disconnect()}function dt(t,{root:e,margin:n,amount:s,once:r=!1,initial:g=!1}={}){const[m,p]=u.useState(g);return u.useEffect(()=>{if(!t.current||r&&m)return;const x=()=>(p(!0),r?void 0:()=>p(!1)),b={root:e&&e.current||void 0,margin:n,amount:s};return ut(t.current,x,b)},[e,t,n,r,s]),m}function mt({to:t,from:e=0,direction:n="up",delay:s=0,duration:r=2,className:g="",startWhen:m=!0,separator:p,locale:x="en-US",onStart:b,onEnd:l}){const d=u.useRef(null),y=F(n==="down"?t:e),L=20+40*(1/r),D=100*(1/r),h=ct(y,{damping:L,stiffness:D}),E=dt(d,{once:!0,margin:"0px"}),A=j=>{const k=j.toString();if(k.includes(".")){const S=k.split(".")[1];if(parseInt(S)!==0)return S.length}return 0},V=Math.max(A(e),A(t));return u.useEffect(()=>{d.current&&(d.current.textContent=String(n==="down"?t:e))},[e,t,n]),u.useEffect(()=>{if(E&&m){typeof b=="function"&&b();const j=setTimeout(()=>{y.set(n==="down"?e:t)},s*1e3),k=setTimeout(()=>{typeof l=="function"&&l()},s*1e3+r*1e3);return()=>{clearTimeout(j),clearTimeout(k)}}},[E,m,y,n,e,t,s,b,l,r]),u.useEffect(()=>{const j=h.on("change",k=>{if(d.current){const S=V>0,T={useGrouping:!!p,minimumFractionDigits:S?V:0,maximumFractionDigits:S?V:0};d.current.textContent=new Intl.NumberFormat(x,T).format(k)}});return()=>j()},[h,V,x]),f.jsx("span",{className:g,ref:d})}const z=t=>{const e=Number(t);return Number.isFinite(e)?e:null},pt=t=>{const e=z(t.pl_eqt),n=z(t.pl_insol),s=e!=null&&e>=180&&e<=310,r=n!=null&&n>=.25&&n<=1.5;return s||r};function yt({src:t="/exoplanets.csv",lang:e=W,messages:n}){const[s,r]=u.useState(null),[g,m]=u.useState(null),p=O(e),[x,b]=u.useState(p),l=u.useMemo(()=>n&&x===p?n:K(x).stats,[x,n,p]);u.useEffect(()=>{const i=Q(p);b(a=>a===i?a:i);const o=a=>{const c=O(a.detail?.lang);b(c)};return window.addEventListener(R,o),()=>window.removeEventListener(R,o)},[p]),u.useEffect(()=>{const i=new AbortController;return(async()=>{try{const o=await fetch(t,{signal:i.signal});if(!o.ok)throw new Error(`HTTP ${o.status}`);const a=await o.text(),c=X(a);r(Array.isArray(c)?c:[])}catch(o){o.name!=="AbortError"&&m(o)}})(),()=>i.abort()},[t]);const d=u.useMemo(()=>{if(!s)return null;const i=s.length,o=new Set,a=new Map;let c=0;for(const C of s){const I=C.hostname;I&&(o.add(I),a.set(I,(a.get(I)??0)+1)),pt(C)&&c++}const w=o.size;let v=0;for(const[,C]of a)C>=2&&v++;return{total:i,systems:w,multiSystems:v,tempered:c}},[s]),{ariaLabel:y,heading:L,intro:D,cards:h}=l,E=u.useMemo(()=>[{id:"planets",kicker:h.planets.kicker,value:d?.total??0,title:h.planets.title,description:h.planets.description},{id:"systems",kicker:h.systems.kicker,value:d?.systems??0,title:h.systems.title,description:h.systems.description},{id:"multi",kicker:h.multi.kicker,value:d?.multiSystems??0,title:h.multi.title,description:h.multi.description},{id:"tempered",kicker:h.tempered.kicker,value:d?.tempered??0,title:h.tempered.title,description:h.tempered.description}],[h,d]),[A,V]=u.useState(E.map(i=>i.id));u.useEffect(()=>{const i=E.map(o=>o.id);V(o=>{const a=o.filter(w=>i.includes(w)),c=i.filter(w=>!a.includes(w));return[...a,...c]})},[E]);const j=(i,o)=>{V(a=>{const c=[...a],w=c.indexOf(i),v=c.indexOf(o);return w===-1||v===-1?a:([c[w],c[v]]=[c[v],c[w]],c)})},[k,S]=u.useState(null);if(g)return f.jsxs(N.section,{className:"glass card",style:{padding:"1rem"},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.16,1,.3,1]},children:[l.errorPrefix,": ",String(g)]});if(!d)return f.jsx(N.section,{className:"glass card",style:{padding:"1rem"},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.16,1,.3,1]},children:l.loading});const T=i=>i==null?0:i<1e3?i:Math.round(i/100)*100,H=({kicker:i,value:o,title:a,description:c,featured:w=!1})=>{const v=T(o);return f.jsxs("article",{className:`glass card stat ${w?"featured":""}`,children:[f.jsx("div",{className:"kicker",children:i}),f.jsx("div",{className:"big",children:o==null?"—":f.jsxs(f.Fragment,{children:[f.jsx(mt,{to:v,duration:2,locale:x}),"+"]})}),f.jsx("h3",{style:{margin:".25rem 0 .35rem"},children:a}),f.jsx("p",{className:"subtitle",children:c})]})};return f.jsxs(N.section,{"aria-label":y,style:{marginTop:"1rem"},initial:{opacity:0,y:32},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.75,ease:[.16,1,.3,1]},children:[f.jsx("h2",{style:{textAlign:"center",margin:"0 0 .5rem"},children:L}),f.jsx("p",{className:"subtitle",style:{textAlign:"center",margin:"0 0 1rem"},children:D}),f.jsx("div",{className:"bento-grid",role:"list",children:A.map((i,o)=>{const a=E.find(c=>c.id===i);return a?f.jsx(N.div,{role:"listitem",className:"bento-item glass",draggable:!0,onDragStart:()=>S(i),onDragOver:c=>c.preventDefault(),onDrop:()=>k&&j(k,i),onDragEnd:()=>S(null),"aria-grabbed":k===i,title:"Arrastra para reordenar",initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-15% 0px"},transition:{duration:.55,delay:.1+o*.05,ease:[.16,1,.3,1]},children:f.jsx(H,{kicker:a.kicker,value:a.value,title:a.title,description:a.description,featured:o===0})},i):null})}),f.jsx("style",{children:`
        .bento-grid{ display:grid; gap:.75rem; grid-template-columns:repeat(4,minmax(0,1fr)); }
        .bento-item{ border-radius:16px; cursor: grab; }
        .bento-item:active{ cursor: grabbing; }
        /* Patrón Bento: posición depende del orden visual */
        @media (min-width:1024px){
          .bento-item:nth-child(1){ grid-column:span 2; grid-row:span 2; }
          .bento-item:nth-child(2){ grid-column:span 1; grid-row:span 1; }
          .bento-item:nth-child(3){ grid-column:span 1; grid-row:span 1; }
          .bento-item:nth-child(4){ grid-column:span 2; }
        }
        @media (max-width:1023px){ .bento-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
        @media (max-width:640px){ .bento-grid{ grid-template-columns:1fr; } }

        .stat { text-align:center; padding:1.25rem; position:relative; height:100%; }
        .stat.featured{ display:flex; flex-direction:column; justify-content:center; align-items:center; padding:2rem; overflow:hidden; }
        .stat.featured .big{ font-size: clamp(2.4rem, 6.5vw, 3.6rem); }
        .stat.featured::before{ content:""; position:absolute; inset:auto; width:380px; height:380px; border-radius:50%; right:-140px; top:-140px; background: radial-gradient(closest-side, rgba(137,180,255,.25), rgba(137,180,255,.12) 50%, transparent 70%); filter: blur(12px); pointer-events:none; }
        .stat.featured::after{ content:""; position:absolute; width: 120px; height: 120px; left: -50px; bottom: -50px; border-radius: 50%; background: radial-gradient(circle, rgba(255,255,255,.08), transparent 70%); filter: blur(6px); pointer-events:none; }
        .kicker{
          display:inline-block; padding:.35rem .6rem; border-radius:999px;
          border:1px solid var(--glass-brd); background:rgba(255,255,255,.06);
          margin-bottom:.5rem;
          box-shadow: 0 0 30px rgba(137,180,255,.25), inset 0 1px 0 rgba(255,255,255,.05);
        }
        .big{
          font-weight:900; font-size: clamp(1.8rem, 5.5vw, 2.6rem);
          letter-spacing:.5px; margin:.1rem 0;
          background:linear-gradient(180deg, #e6eaff 0%, #b7c0e6 100%);
          -webkit-background-clip:text; background-clip:text; color:transparent;
          text-shadow: 0 0 32px rgba(137,180,255,.15);
        }
      `})]})}export{yt as default};
