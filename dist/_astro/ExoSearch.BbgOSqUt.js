import{g as v,a as Y,d as k,L as M,j as t,D as P}from"./translations.B_Ehg3mh.js";import{r as a}from"./index.CQ95-tCy.js";const N=s=>{const h=Number(s);return Number.isFinite(h)?h:null},F=s=>({id:s["No."],name:s["Planet Name"],host:s["Planet Host"],method:s["Discovery Method"]||"",year:N(s["Discovery Year"]),mass:N(s.Mass),distance:N(s.Distance)});function I({src:s="/exoplanets.json",lang:h=P,messages:x}){const[c,b]=a.useState([]),[p,S]=a.useState(""),d=v(h),[m,A]=a.useState(d),j=a.useMemo(()=>x&&m===d?x:Y(m).search,[m,x,d]),{filters:n,tableHeaders:o}=j,[u,w]=a.useState(n.methodAll),[g,C]=a.useState(""),[y,E]=a.useState("");a.useEffect(()=>{const e=new AbortController;return(async()=>{const r=await(await fetch(s,{signal:e.signal})).json();b(Array.isArray(r)?r.map(F):[])})().catch(()=>{}),()=>e.abort()},[s]),a.useEffect(()=>{const e=k(d);A(r=>r===e?r:e);const l=r=>{const i=v(r.detail?.lang);A(i)};return window.addEventListener(M,l),()=>window.removeEventListener(M,l)},[d]),a.useEffect(()=>{w(n.methodAll)},[n.methodAll]);const T=a.useMemo(()=>{const e=Array.from(new Set(c.map(l=>l.method).filter(Boolean))).sort();return[n.methodAll,...e]},[c,n.methodAll]),L=a.useMemo(()=>{const e=p.trim().toLowerCase(),l=g?Number(g):-1/0,r=y?Number(y):1/0;return c.filter(i=>{const D=!e||i.name.toLowerCase().includes(e)||(i.host||"").toLowerCase().includes(e),q=u===n.methodAll||i.method===u,f=i.year??NaN,R=Number.isNaN(f)?!0:f>=l&&f<=r;return D&&q&&R}).slice(0,20)},[c,p,u,g,y,n.methodAll]);return t.jsxs("section",{className:"glass card",style:{marginTop:"1rem"},children:[t.jsx("h3",{style:{marginTop:0},children:j.title}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr",gap:"0.75rem"},children:[t.jsx("input",{className:"glass",placeholder:n.queryPlaceholder,value:p,onChange:e=>S(e.target.value),style:{padding:".6rem .8rem"}}),t.jsx("select",{className:"glass",value:u,onChange:e=>w(e.target.value),style:{padding:".6rem .8rem"},children:T.map(e=>t.jsx("option",{value:e,children:e},e))}),t.jsx("input",{className:"glass",type:"number",placeholder:n.yearMin,value:g,onChange:e=>C(e.target.value),style:{padding:".6rem .8rem"}}),t.jsx("input",{className:"glass",type:"number",placeholder:n.yearMax,value:y,onChange:e=>E(e.target.value),style:{padding:".6rem .8rem"}})]}),t.jsxs("div",{style:{marginTop:"1rem",overflowX:"auto"},children:[t.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 .5rem"},children:[t.jsx("thead",{style:{opacity:.8,fontSize:".9rem"},children:t.jsxs("tr",{children:[t.jsx("th",{style:{textAlign:"left"},children:o.planet}),t.jsx("th",{style:{textAlign:"left"},children:o.host}),t.jsx("th",{children:o.method}),t.jsx("th",{children:o.year}),t.jsx("th",{children:o.mass}),t.jsx("th",{children:o.distance})]})}),t.jsx("tbody",{children:L.map(e=>t.jsxs("tr",{className:"glass",style:{borderRadius:"10px"},children:[t.jsx("td",{style:{padding:".6rem .8rem"},children:e.name}),t.jsx("td",{style:{padding:".6rem .8rem"},children:e.host}),t.jsx("td",{style:{textAlign:"center"},children:e.method||"—"}),t.jsx("td",{style:{textAlign:"center"},children:e.year??"—"}),t.jsx("td",{style:{textAlign:"center"},children:e.mass??"—"}),t.jsx("td",{style:{textAlign:"center"},children:e.distance??"—"})]},e.id))})]}),t.jsx("p",{style:{opacity:.7,marginTop:".5rem"},children:j.summary.replace("{shown}",L.length.toLocaleString(m)).replace("{total}",c.length.toLocaleString(m))})]})]})}export{I as default};
