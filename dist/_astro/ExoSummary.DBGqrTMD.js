import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.CQ95-tCy.js";import{g as L,a as z,d as $,L as E,D as T}from"./translations.p4xl-p1H.js";import{f as D}from"./fetchCSV.DjmYkm7D.js";import{m as o}from"./proxy.CMJzDI2N.js";import"./csv.DMq-eBQM.js";const b=(i,p=!1)=>{const n=Number(i);return!Number.isFinite(n)||p&&n===0?null:n},F=(i,p)=>({id:i.pl_name||`${i.pl_name}|${i.hostname}|${p}`,name:i.pl_name,host:i.hostname,method:i.discoverymethod||null,year:b(i.disc_year),mass:b(i.pl_bmasse),distance:b(i.sy_dist,!0)});function J({src:i="/exoplanets.csv",lang:p=T,messages:n}){const[d,M]=l.useState(null),[w,S]=l.useState(null),u=L(p),[c,j]=l.useState(u),g=l.useMemo(()=>n&&c===u?n:z(c).summary,[c,n,u]),{cards:s,nullLabel:x="Null"}=g;l.useEffect(()=>{const t=$(u);j(m=>m===t?m:t);const a=m=>{const h=L(m.detail?.lang);j(h)};return window.addEventListener(E,a),()=>window.removeEventListener(E,a)},[u]),l.useEffect(()=>{const t=new AbortController;return(async()=>{try{const a=await D(i,{signal:t.signal});M(Array.isArray(a)?a.map(F):[])}catch(a){a.name!=="AbortError"&&S(a)}})(),()=>t.abort()},[i]);const v=l.useMemo(()=>{if(!d)return null;const t=d.length,a=d.map(r=>r.year).filter(Boolean),m=a.length?Math.min(...a):null,h=a.length?Math.max(...a):null,y=new Map;for(const r of d)r.method&&y.set(r.method,(y.get(r.method)??0)+1);const I=[...y.entries()].sort((r,f)=>f[1]-r[1]).slice(0,3),R=d.filter(r=>r.distance!=null).sort((r,f)=>r.distance-f.distance).slice(0,5);return{total:t,minYear:m,maxYear:h,topMethods:I,nearest:R}},[d]);if(w)return e.jsxs(o.div,{className:"glass card",style:{padding:"1rem"},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.16,1,.3,1]},children:[g.errorPrefix,": ",String(w)]});if(!v)return e.jsx(o.div,{className:"glass card",style:{padding:"1rem"},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.16,1,.3,1]},children:g.loading});const{total:_,minYear:A,maxYear:V,topMethods:Y,nearest:C}=v,N=t=>t==null?x:t.toLocaleString(c),k=t=>t==null?x:t.toLocaleString(c);return e.jsxs(o.section,{className:"summary-bento","aria-label":g.ariaLabel,initial:{opacity:0,y:28},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.75,ease:[.16,1,.3,1]},children:[e.jsxs(o.article,{className:"glass card tile total",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px"},transition:{duration:.7,delay:.08,ease:[.16,1,.3,1]},children:[e.jsx("div",{className:"kicker","aria-hidden":!0,children:"ðŸª"}),e.jsx("div",{className:"numb",children:N(_)}),e.jsx("h3",{className:"heading",children:s.total.title}),e.jsx("p",{className:"copy",children:s.total.description})]}),e.jsxs(o.article,{className:"glass card tile time",initial:{opacity:0,y:26},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-15% 0px"},transition:{duration:.65,delay:.12,ease:[.16,1,.3,1]},children:[e.jsx("div",{className:"kicker","aria-hidden":!0,children:"â±ï¸"}),e.jsx("h3",{className:"heading small",children:s.timeRange.title}),e.jsxs("div",{className:"value",children:[k(A),"â€“",k(V)]}),e.jsx("p",{className:"copy muted",children:s.timeRange.description})]}),e.jsxs(o.article,{className:"glass card tile methods",initial:{opacity:0,y:26},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-15% 0px"},transition:{duration:.65,delay:.16,ease:[.16,1,.3,1]},children:[e.jsx("div",{className:"kicker","aria-hidden":!0,children:"ðŸ”­"}),e.jsx("h3",{className:"heading small",children:s.topMethods.title}),e.jsx("ul",{className:"list",children:Y.map(([t,a])=>e.jsxs("li",{children:[e.jsx("strong",{children:t}),e.jsx("span",{children:a.toLocaleString(c)})]},t))})]}),e.jsxs(o.article,{className:"glass card tile nearest",initial:{opacity:0,y:26},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-15% 0px"},transition:{duration:.65,delay:.2,ease:[.16,1,.3,1]},children:[e.jsx("div",{className:"kicker","aria-hidden":!0,children:"ðŸ›°ï¸"}),e.jsx("h3",{className:"heading small",children:s.nearest.title}),e.jsx("ol",{className:"list",children:C.map(t=>e.jsxs("li",{children:[e.jsx("strong",{children:t.name}),e.jsx("span",{children:t.distance!=null?`${N(t.distance)} pc`:x})]},t.id))}),e.jsx("p",{className:"copy muted note",children:s.nearest.note})]}),e.jsx("style",{children:`
              .summary-bento{ display:grid; gap:.8rem; grid-template-columns:1.4fr 1fr 1fr; align-items:stretch; margin-top:1rem; }
              @media (max-width:1024px){ .summary-bento{ grid-template-columns:1fr 1fr; } }
              @media (max-width:640px){ .summary-bento{ grid-template-columns:1fr; gap:.7rem; } }
              .tile{ position:relative; padding:1.1rem; border-radius:16px; overflow:hidden; }
              .tile .kicker{ display:inline-flex; align-items:center; justify-content:center; width:34px; height:34px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid var(--glass-brd); box-shadow:0 0 28px rgba(137,180,255,.25), inset 0 1px 0 rgba(255,255,255,.05); }
                            .tile .heading{ margin:.5rem 0 .25rem; color: var(--text); }
                            .tile .heading.small{ margin:.25rem 0; font-size:1.05rem; color: var(--text); }
                            .tile .value{ color: var(--text); }
                            .tile .copy{ margin:.35rem 0 0; color: var(--text); }
                            .tile .copy.muted{ color: var(--muted); }
              .tile.total{ grid-row:1 / span 2; grid-column:1; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:2rem 1.5rem; }
              .tile.total .numb{ font-weight:900; font-size: clamp(2rem, 6.5vw, 3.4rem); letter-spacing:.5px; background:linear-gradient(180deg,#e6eaff 0%,#b7c0e6 100%); -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow:0 0 32px rgba(137,180,255,.15); }
              .tile.total::before{ content:""; position:absolute; right:-140px; top:-140px; width:360px; height:360px; border-radius:50%; background: radial-gradient(closest-side, rgba(137,180,255,.22), rgba(137,180,255,.1) 50%, transparent 70%); filter:blur(12px); }
              .tile.total::after{ content:""; position:absolute; left:-60px; bottom:-60px; width:150px; height:150px; border-radius:50%; background: radial-gradient(circle, rgba(255,255,255,.08), transparent 70%); filter: blur(8px); }
              @media (max-width:640px){
                .tile{ padding:.9rem; border-radius:14px; }
                .tile .heading.small{ font-size:1rem; }
                .tile.total{ grid-row:auto; grid-column:auto; padding:1.4rem 1rem; }
                .tile.total .numb{ font-size: clamp(1.8rem, 9vw, 2.4rem); }
                .tile.total::before, .tile.total::after{ display:none; }
              }
              .tile.time{ grid-column:2; }
              .tile.methods{ grid-column:3; }
              .tile.nearest{ grid-column:2 / span 2; display:flex; flex-direction:column; }
              @media (max-width:640px){
                .tile.time, .tile.methods, .tile.nearest{ grid-column:auto; }
              }
              .tile .list{ margin:.25rem 0 0; padding:0; list-style:none; display:grid; gap:.25rem; }
                            .tile .list li{ display:flex; justify-content:space-between; gap:.75rem; border:1px solid var(--glass-brd); background:rgba(255,255,255,.04); padding:.5rem .6rem; border-radius:10px; }
                            .tile .list li span{ color: var(--text); }
              .tile.nearest .list{ grid-template-columns:1fr; max-height:200px; overflow:auto; padding-right:.25rem; }
              @media (max-width:640px){ .tile.nearest .list{ max-height:260px; } }
              .tile.nearest .note{ margin-top:.5rem; }
            `})]})}export{J as default};
