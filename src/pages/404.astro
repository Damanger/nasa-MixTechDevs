---
import Layout from "../layouts/Layout.astro";
import StarfieldLoader from "../components/StarfieldLoader.jsx";
import { DEFAULT_LANG, getLanguageSafe, getTranslations } from "../i18n/translations.js";
import NotFoundHero from "../components/NotFoundHero.jsx";

const langParam = Astro.url.searchParams.get("lang");
const lang = getLanguageSafe(langParam ?? DEFAULT_LANG);
const translations = getTranslations(lang);
const nf = translations.notFound;
const title = nf.title;
---
<Layout title={title} lang={lang} translations={translations}>
  <section class="notfound">
    <!-- Loader centrado -->
    <StarfieldLoader client:load speed={0.5} blur={1} />

    <div class="content">
      <NotFoundHero client:load initialLang={lang} />
    </div>
  </section>

  <style>
    .notfound{
      position: relative;
      height: 600px; /* como en el ejemplo */
      border-radius: 22px;
      overflow: hidden;
      border:1px solid var(--glass-brd);
      background: radial-gradient(800px 500px at 20% 20%, rgba(120,80,180,.15), transparent 60%),
                  radial-gradient(600px 400px at 80% 30%, rgba(80,40,120,.12), transparent 60%),
                  linear-gradient(180deg, rgba(12,10,25,1) 0%, rgba(10,8,20,1) 100%);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), 0 20px 50px rgba(0,0,0,.35);
    }
    .content{
      position: relative;
      z-index: 3;
      height: 100%;
      display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.75rem;
      text-align:center;
      /* Permite clics en los botones */
      pointer-events:auto;
    }
    .content h1{ 
      margin:.25rem 0 0; 
      font-size: clamp(2rem, 5vw, 3rem);
      text-shadow: 0 2px 20px rgba(255,255,255,.12);
    }
    .subtitle{ max-width: 640px; margin:0 auto; }
    .cta{ pointer-events:auto; display:flex; gap:.75rem; margin-top:.5rem; }
  </style>
</Layout>
