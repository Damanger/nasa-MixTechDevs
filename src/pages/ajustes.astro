---
import Layout from "../layouts/Layout.astro";
import { DEFAULT_LANG, getLanguageSafe, getTranslations } from "../i18n/translations.js";
import BackgroundColorSettings from "../components/BackgroundColorSettings.jsx";

const langParam = Astro.url.searchParams.get("lang");
const lang = getLanguageSafe(langParam ?? DEFAULT_LANG);
const translations = getTranslations(lang);
const settings = translations.settings;
---

<Layout lang={lang} translations={translations}>
  <section class="glass card settings-hero">
    <h1 style="margin:0; font-size:clamp(2rem,5vw,2.6rem);">{settings.title}</h1>
    <p class="subtitle" style="max-width:560px; margin:1rem auto 0;">{settings.message}</p>
  </section>

  <section class="settings-grid">
    <BackgroundColorSettings client:load strings={settings.background} />
    {settings.cards.map((card:any) => (
      <article class="glass settings-card">
        <h2>{card.title}</h2>
        <p>{card.description}</p>
        <span class="tag">{settings.comingSoon}</span>
      </article>
    ))}
  </section>
</Layout>

<style>
  .settings-hero { margin-top: -1rem; padding: 2.5rem; text-align: center; }
  @media (min-width: 821px) {
    .settings-hero { margin-top: 1rem; }
  }

  .settings-grid {
    margin-top: 1.5rem;
    display: grid;
    gap: 1rem;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .settings-card {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    min-height: 180px;
  }

  .settings-card h2 {
    margin: 0;
    font-size: clamp(1.2rem, 3vw, 1.5rem);
  }

  .settings-card p {
    margin: 0;
    color: var(--muted);
    line-height: 1.6;
  }

  .settings-card .tag {
    margin-top: auto;
    align-self: flex-start;
    padding: 0.35rem 0.7rem;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(137, 180, 255, 0.12);
    color: #e6eaff;
    font-size: 0.75rem;
    letter-spacing: 0.02em;
  }
</style>
