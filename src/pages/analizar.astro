---
import Layout from "../layouts/Layout.astro";
import { DEFAULT_LANG, getLanguageSafe, getTranslations } from "../i18n/translations.js";
import AnalyzeDashboard from "../components/AnalyzeDashboard.jsx";

const langParam = Astro.url.searchParams.get("lang");
const lang = getLanguageSafe(langParam ?? DEFAULT_LANG);
const translations = getTranslations(lang);
const { analyze } = translations;
---

<Layout lang={lang} translations={translations}>
  <section class="glass card" style="padding:2.5rem; text-align:center; margin-bottom:1rem">
    <h1 style="margin:0; font-size:clamp(2rem, 5vw, 2.6rem);">{analyze.title}</h1>
    <p class="subtitle" style="max-width:520px; margin:1rem auto 0;">{analyze.message}</p>
  </section>

  <section class="glass card" style="padding:1.25rem;">
    <!-- Importante: hidratar el componente React -->
    <AnalyzeDashboard client:load lang={lang} />
  </section>
</Layout>

<style>
  /* Espaciado responsive para tarjetas en /analizar */
  .glass.card { margin-top: 0rem; }
  @media (min-width: 821px) {
    .glass.card { margin-top: 2rem; }
  }
</style>
