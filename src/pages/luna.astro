---
import Layout from "../layouts/Layout.astro";
import MoonSwitcher from "../components/MoonSwitcher.jsx";
import { DEFAULT_LANG, getLanguageSafe, getTranslations } from "../i18n/translations.js";

const langParam = Astro.url.searchParams.get("lang");
const lang = getLanguageSafe(langParam ?? DEFAULT_LANG);
const messages = getTranslations(lang);
const { moon } = messages;
---
<Layout lang={lang} title={moon.title} description={moon.subtitle} translations={messages}>
  <section class="glass card moonsection" style="padding:1.25rem 1.25rem 1.5rem; display:grid; gap:0.75rem;">
    <h1 class="moon-title" style="margin-bottom:.5rem;">{moon.title}</h1>
    <p class="moon-sub">{moon.subtitle}</p>
    <MoonSwitcher client:only="react" messages={moon} />
    <style>
      .moon-title { margin: 0 0 0.25rem 0; }
      .moon-sub { margin: 0; opacity: 0.9; }
      .moonsection { width: 100%; margin-inline: auto; }
      .moon-sep{ border:0; height:1px; background: rgba(255,255,255,0.1); margin: .5rem 0; }
      /* ajustes de landscape bajo en altura */
      @media (orientation: landscape) and (max-height: 520px) {
        .moonsection { padding: 0.9rem 1rem 1.1rem; }
        .moon-title { margin-bottom: 0.1rem; }
        .moon-sub { margin: 0 0 0.2rem 0; }
      }
      @media (orientation: landscape) and (max-height: 520px) {
        .mpb { gap: 10px !important; }
        .mpb-row { gap: 12px !important; align-items: center !important; }
        .mpb-info { min-width: 200px !important;}
      }
      @media (min-width: 1024px) {
        .moonsection {
          margin-top: 2rem;
        }
      }
      @media (max-width: 820px) {
        .moonsection {
          margin-top: 0rem;
        }
      }
    </style>
  </section>
</Layout>
