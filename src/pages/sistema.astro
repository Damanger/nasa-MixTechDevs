---
import Layout from "../layouts/Layout.astro";
import { DEFAULT_LANG, getLanguageSafe, getTranslations } from "../i18n/translations.js";
import SolarSystemBuilder from "../components/SolarSystemBuilder.jsx";
import SolarSystemHero from "../components/SolarSystemHero.jsx";

const langParam = Astro.url.searchParams.get("lang");
const lang = getLanguageSafe(langParam ?? DEFAULT_LANG);
const translations = getTranslations(lang);
const solar = translations.solar ?? {
  title: lang === 'en' ? 'My Solar System' : lang === 'de' ? 'Mein Sonnensystem' : 'Mi sistema solar',
  subtitle: lang === 'en' ? 'Create, organize and save your solar system in a custom way.' : (lang === 'de' ? '' : 'Crea, organiza y guarda tu sistema solar personalizado.'),
};
---

<Layout lang={lang} translations={translations}>
  <section class="glass settings-hero">
    <SolarSystemHero client:only="react" initialLang={lang} />
  </section>

  <section class="builder-grid">
    <SolarSystemBuilder client:only="react" />
  </section>
</Layout>

<style>
  .settings-hero { margin-top: 0rem; padding: 2.0rem; text-align: center; }
  @media (min-width: 821px) { .settings-hero { margin-top: 1.5rem; } }
  .builder-grid { margin-top: 1rem; }
  .subtitle { color: var(--muted); }
  .glass { background: var(--glass-bg); border: 1px solid var(--glass-brd); border-radius: 14px; }
  .settings-hero.glass { backdrop-filter: blur(14px) saturate(120%); }
</style>
